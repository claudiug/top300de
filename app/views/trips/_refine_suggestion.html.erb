<section class="filter-col fly-left">
  <%= form_tag trips_path, method: :get do %>
  <div class="head">Refine search</div>
  <div class="box leftcol-break">
    <div class="title">From</div>

    <div class="box-content">
      <!-- <input type="text" class="input size2 map" id="wat-from-location" value= <%= params[:location] %> /> -->
      <%= text_field_tag("location", params[:location], :autocomplete => :off, value:params[:location], class:"input size2 map", placeholder:"your city name here") %>

    </div> <!-- .box-content -->

    <!-- if no departure location selected -->
    <div class="wat-modal no-location-modal" id="wat-no-location">

      <div class="title">
        Tip!
        <div class="icons fui-cross close"></div>
      </div>

      <p>Type in your departure location (ex: Berlin) and you will get travel distances and duration.
      </p>

    </div> <!-- .wat-modal no-location-modal -->

    <div class="box-content" id="wat-transport">

      <div class="title">I prefer to travel with:</div>

      <div class="trip-with trip-type options">
        <label class="styled styled-on" id="by_car">
          <input id="by_car" name="by_car" type="checkbox" checked="checked" disabled>
          <i></i><span>By car</span>
        </label>

        <label class="styled disabled" id="by_bike">
          <input id="by_bike" name="by_bike" type="checkbox" disabled="disabled">
          <i></i><span>By bicycle</span>
        </label>

        <label class="styled disabled" id="by_train">
          <input id="by_train" name="by_train" disabled="disabled" type="checkbox">
          <i></i><span>By train</span>
        </label>


      </div>
    </div> <!-- .box-content -->

    <div class="title">Distance from home:</div>

    <div class="box-content">
      <div class="trip-with trip-type options">


        <div id="distance-slider">

        </div>
        <input id="distance-filter" name="distance-filter" class="distance-filter" readonly="readonly" />


        <script type="text/javascript">
            /* Distance slider */
            $(document).ready(function() {

            var startRange = 87;
            var stopRange = 761;

            $("#distance-slider").slider({
                range: "max",
                value: stopRange,
                min: startRange,
                max: stopRange,
                slide: function(event, ui) {
                    $("#distance-filter").val(ui.value + " Km");
                }
            });

                $("#distance-filter").val(stopRange + " Km");

            });
        </script>

      </div>

      <input class="submit-go rsmaller faded" name="filter" type="submit" value="Filter">

    </div> <!-- .box-content -->
  </div> <!-- .box -->


  <div class="box">
    <div class="title">Refine destination</div>
    <div class="box-content trip-refine">
      <div class="trip-type options">
        <% a = params[:category] %>
        <% hike_check = (a.keys.include?'hike') ? true : false %>
       <label class= "styled" id="go_hike">
          <%= check_box_tag("category[hike]", (params[:category]), hike_check, id:"go_hike") %>
          <i></i><span>Hiking</span>
        </label>

        <label class="styled" id="go_mountain">
          <% mountain_check = (a.keys.include?'mountain') ? true : false %>
          <%= check_box_tag("category[mountain]", (params[:category]), mountain_check, id:"go_mountain") %>
          <i></i><span>Mountains</span>
        </label>

        <label class="styled" id="go_lake">
          <% lake_check = (a.keys.include?'lake') ? true : false %>
          <%= check_box_tag("category[lake]", (params[:category]), lake_check, id:"go_lake") %>

          <i></i><span>Lakes, sea, waterfalls</span>
        </label>

        <label class="styled" id="go_castle">
          <% castle_check = (a.keys.include?'castle') ? true : false %>
          <%= check_box_tag("category[castle]",(params[:category]), castle_check, id:"go_castle") %>

          <i></i><span>Castles</span>
        </label>

        <label class="styled" id="go_events">
          <% event_check = (a.keys.include?'event') ? true : false %>
          <%= check_box_tag("category[event]", (params[:category]), event_check, id:"go_events") %>

          <i></i><span>Festivals and Events</span>
        </label>

        <label class="styled" id="go_city">
          <% city_check = (a.keys.include?'city') ? true : false %>
          <%= check_box_tag("category[city]", (params[:category]), city_check, id:"go_city") %>
          <i></i><span>Cities</span>
        </label>

        <!--
        <label class="styled" id="go_landscape">
          <% landscape_check = (a.keys.include?'landscape') ? true : false %>
          <%= check_box_tag("category[landscape]", (params[:category]), landscape_check, id:"go_landscape") %>
          <i></i><span>Sightseeing</span>
        </label>
        -->
      </div>

      <input class="submit-go rsmaller faded" name="filter" type="submit" value="Filter">

    </div>
  </div> <!-- .box -->

  <%= render 'suggestions' %>

  <% end %>
</section>

<script type="text/javascript">
$(document).ready(function() {
    if( !$('#location').val() ) {
        $(this).focus();
        $('#wat-transport').hide();
        $('#wat-no-location').show();
    }
})
</script>